<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <title>Beacon Offline Survival Toolkit – Emergency SOS, Compass, Morse Code & More</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, interactive-widget=resizes-content">
    <meta name="description" content="Beacon: A minimalist emergency survival tool designed for quick access to essential features like an SOS signal, compass, pedometer, Morse code translator, and a functional signal mirror. Built for reliability and efficiency, this tool ensures users have life-saving utilities available offline when they need them most.">
    <meta name="author" content="Michael Schwartz">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Beacon Offline Survival Toolkit – Emergency SOS, Compass, Morse Code & More">
    <meta name="theme-color" content="hsl(205deg 18.75% 87.45%)">
    <meta name="apple-mobile-web-app-title" content="Beacon Offline Survival Toolkit – Emergency SOS, Compass, Morse Code & More">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="msapplication-starturl" content="./index.html">
    <meta name="msapplication-navbutton-color" content="hsl(205deg 18.75% 87.45%)">
    <meta property="og:url" content="https://michaelsboost.com/Beacon" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Beacon Offline Survival Toolkit – Emergency SOS, Compass, Morse Code & More" />
    <meta property="og:description" content="Beacon: A minimalist emergency survival tool designed for quick access to essential features like an SOS signal, compass, pedometer, Morse code translator, and a functional signal mirror. Built for reliability and efficiency, this tool ensures users have life-saving utilities available offline when they need them most." />
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" type="image/x-icon" href="imgs/logo.svg">
    <link rel="icon" type="image/svg+xml" href="imgs/logo.svg" />
    <link rel="apple-touch-icon" href="imgs/logo.svg">
    <link rel="stylesheet" href="dist/bundle.css">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js" defer></script>
  
  </head>
  <body>
    
<main class="dashboard-container p-4 h-screen">
  <div class="grid grid-cols-2 gap-4">

    <!-- SOS Signal -->
    <article class="tile col-span-1 row-span-2 h-48 flex flex-col justify-center items-center" x-data="{ playing: false }">
      <button class="p-4 text-xl font-bold" @click="playing = !playing; playing ? $refs.sos.play() : ($refs.sos.pause(), $refs.sos.currentTime = 0);" x-text="playing ? 'STOP SOS' : 'SOS'">
        <audio x-ref="sos">
          <source src="audios/audio_dfb929b28d.mp3" type="audio/mpeg">
        </audio>
      </button>
    </article>

    <!-- Signal Mirror -->
    <article class="tile bg-white text-black col-span-1 row-span-2 h-48 flex flex-col justify-center items-center" x-data="{
               flashing: false, 
               interval: null,
               sosPattern: [250, 250, 250, 250, 250, 750, 250, 750, 250, 750, 250, 250, 250, 250, 250, 1000], 
               flashIndex: 0,
               
               flashScreen() {
                 if (this.flashing) {
                   this.flashIndex = 0;
                   this.runSOS();
                 } else {
                   clearInterval(this.interval);
                   document.getElementById('signalMirror').classList.add('hidden');
                   document.querySelectorAll('.tile').forEach(e => e.classList.remove('hidden'));
                 }
               },
    
               runSOS() {
                 if (!this.flashing) return;
    
                 let duration = this.sosPattern[this.flashIndex];
                 document.getElementById('signalMirror').classList.toggle('hidden');
    
                 this.flashIndex++;
    
                 if (this.flashIndex >= this.sosPattern.length) {
                   setTimeout(() => {
                     this.flashIndex = 0; 
                     this.runSOS();
                   }, 2000); // Pause before repeating
                 } else {
                   setTimeout(() => this.runSOS(), duration);
                 }
               }
             }">
      <button @click="flashing = !flashing; flashScreen();" class="p-4 text-xl font-bold">
        <span x-text="flashing ? 'STOP Flash' : 'Signal Mirror'"></span>
      </button>
    </article>

    <!-- Compass -->
    <article class="tile col-span-1 row-span-2 h-48 flex flex-col justify-center items-center" x-data="{ heading: 0 }" x-init="if ('ondeviceorientationabsolute' in window) {
                       window.addEventListener('deviceorientationabsolute', (event) => {
                         heading = Math.round(event.alpha); // Get the heading in degrees
                         $refs.compassArrow.style.transform = `rotate(${360 - heading}deg)`; // Rotate the arrow
                       });
                     } else { heading = 'Not Supported'; }">
      <span x-text="heading"></span>
      <svg class="w-full my-4" viewBox="0 0 512 512">
        <path d=" M 255.5 0.024 C 255.06 0.105 254.62 0.228 254.221 0.341 L 253.903 0.341 C 115.633 1.702 3.354 113.11 0.632 251.054 L 0.632 251.371 C -0.728 254.201 -0.728 257.495 0.632 260.325 L 0.632 260.653 C 3.027 399.742 116.799 512 256.462 512 L 259.02 512 C 398.365 510.598 511.248 397.511 512.291 258.084 C 512.371 257.449 512.371 256.806 512.291 256.17 L 512.291 254.891 C 512.331 254.466 512.331 254.038 512.291 253.612 C 510.93 114.39 397.966 1.538 258.703 0.341 C 257.661 0.055 256.578 -0.052 255.5 0.024 Z  M 244.315 21.114 C 244.949 21.073 245.594 21.155 246.229 21.114 L 246.229 31.04 C 246.188 34.724 248.111 38.152 251.304 40.035 C 254.507 41.877 258.416 41.877 261.619 40.035 C 264.812 38.152 266.736 34.714 266.695 31.04 L 266.695 21.124 C 388.654 26.333 486.299 123.978 491.508 245.937 L 479.678 245.937 C 474.04 246.449 469.875 251.494 470.397 257.132 C 470.919 262.761 475.953 266.925 481.592 266.404 L 491.508 266.404 C 486.299 388.363 388.654 486.008 266.695 491.216 L 266.695 481.3 C 266.799 478.357 265.63 475.51 263.487 473.49 C 261.343 471.47 258.432 470.471 255.5 470.75 C 255.06 470.832 254.62 470.955 254.221 471.067 C 249.461 472.142 246.118 476.422 246.229 481.3 L 246.229 491.216 C 124.269 486.008 26.624 388.363 21.416 266.404 L 31.332 266.404 C 35.016 266.444 38.444 264.521 40.327 261.328 C 42.165 258.135 42.165 254.205 40.327 251.013 C 38.444 247.82 35.005 245.896 31.332 245.937 L 21.416 245.937 C 26.573 124.623 123.236 27.244 244.315 21.124 L 244.315 21.114 Z " fill="currentColor"></path>
        <g x-ref="compassArrow" style="transform-origin: center;">
          <path d=" M 248.445 67.683 C 248.279 67.978 248.129 68.282 247.997 68.594 C 247.526 69.592 247.22 70.66 247.092 71.756 L 210.24 254.254 C 210.013 255.45 210.013 256.677 210.24 257.872 L 246.875 440.559 C 247.687 445.167 251.69 448.526 256.369 448.526 C 261.048 448.526 265.051 445.166 265.862 440.559 L 302.498 257.858 C 302.724 256.663 302.724 255.435 302.498 254.24 L 265.638 71.749 C 264.964 68.179 262.335 65.294 258.844 64.29 C 255.352 63.287 251.593 64.336 249.126 67.002 L 248.453 67.675 L 248.445 67.683 Z  M 229.683 256.056 L 283.048 256.049 L 256.362 389.465 L 229.683 256.056 Z " fill="currentColor"></path>
        </g>
      </svg>
    </article>

    <!-- Pedometer -->
    <article class="tile col-span-1 row-span-2 h-48 flex flex-col justify-center items-center" x-data="{
        steps: 0,
        stepLength: 0.75, // Average step length in meters
        reset() {
          this.steps = 0;
        },
        init() {
          if ('ondevicemotion' in window) {
            let lastY = null;
            window.addEventListener('devicemotion', (event) => {
              let y = event.accelerationIncludingGravity.y;
              if (lastY !== null &amp;&amp; Math.abs(y - lastY) > 1) {
                this.steps++;
              }
              lastY = y;
            });
          }
        },
        reset() {
          this.steps = 0;
        }
      }" x-init="init()">
      <p>Steps Taken: <span x-text="steps"></span></p>
      <p>Estimated Distance: <span x-text="(steps * stepLength).toFixed(2)"></span> meters</p>
      <button @click="reset()" class="w-full">Reset</button>
    </article>

    <!-- Morse Code Translator -->
    <article class="tile col-span-2 md:col-span-2 row-span-2 h-48 flex flex-col justify-center items-center" x-data="{
         playing: null,
         textInput: '',
         morseOutput: '',
         morseMap: {
           'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.',
           'H': '....', 'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.',
           'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',
           'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--', 'Z': '--..',
           '0': '-----', '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....',
           '6': '-....', '7': '--...', '8': '---..', '9': '----.'
         },
         updateMorse() {
           this.morseOutput = this.textInput.toUpperCase().split('')
             .map(letter => this.morseMap[letter] || ' ')
             .join(' ');
         },
         playMorseCode() {
          if (this.playing) {
            this.playing = false; // Stop current playback
            clearTimeout(this.timeout); // Cancel the queue
            navigator.vibrate(0); // Stop any ongoing vibration
            return;
          }
        
          this.playing = true; // Mark as playing
        
          let morseSequence = this.morseOutput.split('');
          let index = 0;
          let unit = 200; // Base timing unit (200ms for a dot)
        
          const playNext = () => {
            if (!this.playing || index >= morseSequence.length) {
              this.playing = false;
              return;
            }
        
            let symbol = morseSequence[index];
            index++;
        
            switch (symbol) {
              case '.':
                navigator.vibrate(unit);
                this.timeout = setTimeout(playNext, unit * 2);
                break;
              case '-':
                navigator.vibrate(unit * 3);
                this.timeout = setTimeout(playNext, unit * 4);
                break;
              case ' ':
                this.timeout = setTimeout(playNext, unit * 6);
                break;
              default:
                playNext();
            }
          };
        
          playNext();
        }
       }">
      <span class="text-2xl mb-4">Morse Code</span>
      <fieldset role="group">
        <input x-model="textInput" @input="updateMorse()" type="text" placeholder="Enter text..." class="w-5/6 p-2 rounded-md">
        <button @click="playMorseCode()" x-text="playing ? 'Stop' : 'Play'">Play</button>
      </fieldset>
      <p x-text="morseOutput" class="text-lg mt-2"></p>
    </article>
    
    <!-- Level Tool -->
    <article class="tile col-span-2 row-span-2 h-48 flex flex-col justify-center items-center" x-data="{
               x: 0,
               y: 0,
               initLevel() {
                 if ('ondevicemotion' in window) {
                   window.addEventListener('devicemotion', (event) => {
                     if (event.accelerationIncludingGravity) {
                       this.x = event.accelerationIncludingGravity.x.toFixed(2);
                       this.y = event.accelerationIncludingGravity.y.toFixed(2);
                     }
                   });
                 }
               },
               bubbleX() { return `translateX(${this.x * 10}px)`; }, 
               bubbleY() { return `translateY(${this.y * 10}px)`; }
             }" x-init="initLevel()">
      <span class="text-2xl  mb-4">Level Tool</span>
    
      <!-- Level Visual Representation -->
      <div class="relative w-40 h-40 border-4 border-gray-700 rounded-full flex justify-center items-center overflow-hidden bg-gray-200">
        <div class="absolute w-8 h-8 bg-green-500 rounded-full transition-transform" :style="'transform: ' + bubbleX() + ' ' + bubbleY()">
        </div>
      </div>
    
      <p class="mt-4 text-sm">Tilt your device to see the bubble move.</p>
    </article>
  </div>
</main>

<div id="signalMirror" class="fixed inset-0 bg-white hidden z-20"></div>

    <script src="dist/script.js" ></script>
    <script src="https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-sw.js"></script>
    <script>
      // service worker for progressive web app
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js')
        })
      }
    </script>
  </body>
</html>